<html>
<head>
<meta charset="UTF-8">
<title>missiles</title>
<style type="text/css" media="screen">
    body {
      background-color: #111111
    }
    #editor {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        width: 630px;
        color: #eeeeee;
    }
    #canvas {
      position: absolute;
      top: 0;
      left: 630px;
      bottom: 0;
      right: 0;
      background-color: #777777;
    }
</style>
</head>
<body>
  <div id="editor"><code><pre>hello</pre><code></div>
<canvas id="canvas" width="1" height="1"></canvas>
<div id="errorbar"></div>
<script>
  var canvas = document.getElementById('canvas');
  canvas.width = window.innerWidth - 630;
  canvas.height = window.innerHeight;
</script>
<script src="ai.js"></script>
<script src="Space.js"></script>

<script id="pilot-script">
function* pilotScript(e){
  yield ai.waitFor(e, .5);
  yield ai.thrustFor(e, .15);
  yield ai.turnLeft(e, 180);
  while(true){
    yield ai.thrustFor(e, .3);
    yield ai.turnLeft(e, 180);
  }
  ai.detonate(e);
}
</script>
<script>
var pilotScriptSource = document.getElementById('pilot-script').innerHTML;
document.getElementById('editor').innerHTML = '<code><pre>'+pilotScriptSource+'</pre></code>';
</script>

<script>
  var display = new Space.SpaceDisplay('canvas');
  var world = new Space.SpaceWorld();

  var ship = Space.makeShip(10, 200, .1, .1, -90, pilotScript);
  world.addEntity(Space.makeBoid(10, 20, .1, .2));
  world.addEntity(Space.makeBoid(100, 200, .1, .2));
  world.addEntity(ship);
  setInterval(function(){
    world.tick()
    display.render(world.entities, 0, 0, 1000, 1000);
  }, 10);

</script>
</body>
</html>
